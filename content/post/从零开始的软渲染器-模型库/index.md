---
title: "从零开始的软渲染器 模型库"
date: 2023-06-25T14:37:37+08:00
draft: false
tags: [图形学,渲染]
categories: 图形学
mathjax: true
markup: pandoc
image: cover.jpg
---

<u>**[导航页面](../从零开始的软渲染器-导航/)**</u>

# OBJ格式简介

.obj格式是描述几何模型的一种简单办法。它可以描述顶点的坐标、法向量、纹理坐标，以及三角面的顶点数据等等。

**注释**

.obj格式里的注释是以#开头的一行

**顶点坐标**

例如

```
v 0.511631 -0.845357 0.127832
v 0.608654 -0.568839 -0.416318
v 0.424663 -0.649937 -0.567418
...
```

以v开头，后面带三个小数。注意这个坐标是模型相对于自己原点的坐标，而不是我们渲染过程中的世界坐标。它不会提供总数，只会一条一条地提供。

读取的时候需要注意自己统计总数，另外还要记录序号（写在数组里没有这个问题）。以及序号从一开始计数。

**纹理坐标**

例如

```
vt  0.617 0.575 0.000
vt  0.623 0.573 0.000
vt  0.627 0.576 0.000
...
```

以vt开头，后面还是带三个数。通常我们的纹理是二维的，所以第三个会是零。这里的纹理坐标指的是在纹理图片文件上的坐标。显然你会怀疑，纹理图片的大小不是800x800这种形式的吗？为什么这里是小数？

我认为是为了统一，我们只要用坐标乘以宽度、长度，再四舍五入即可得到图片上的像素坐标。

**法向量方向**

例如

```
vn  -0.250 0.462 -0.851
vn  -0.192 0.568 -0.801
vn  -0.359 0.279 0.891
...
```

描述了法向量指向的方向。

注意可能并不是单位向量，我没有找到限制必须是单位向量的规定。

**注意**

上面这三种数据总数不一定是一样的，它们之间的关联也不是一定是序号对应的。大部分时候不一样，也不对应。它们只是描述了一组这样的数据而已，具体到三角面上，才会体现如何使用这些数据。

使用这些数据时，序号就变得重要了起来。再次提醒序号从一开始计数。

**三角面信息**

例如

```
f 1206/1252/1206 1207/1254/1207 1205/1255/1205
f 1206/1252/1206 1208/1256/1208 1086/1257/1086
f 1206/1252/1206 1086/1257/1086 1087/1253/1087
...
```

以f开头，带了三组数据。每组都有三个数字。带有三个数字是因为要描述三角面的三个顶点。

第一组，描述了三个顶点的（模型）空间坐标。这三个数字是序号，我们用序号去访问数组即可得到坐标。

第二组，描述了三个顶点的材质uv坐标，也是序号。

第三组，描述了三个顶点的法向量坐标，也是序号。

我们目前了解以上信息即可。

# model.h
