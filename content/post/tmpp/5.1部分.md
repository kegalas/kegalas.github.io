
# 缩写

RPQ-regular path queries

PMR-path multiset representation

# 符号表

$G$：通常指一张图，即图数据库的图

$R$：通常指建立在图G上的PMR，见下

$\gamma$：$R$到$G$的一个homomorphism，见下

$S$：起始节点的集合；或者只是一个集合

$T$：目标节点的集合

$M$：一般表示一个multiset

$M(a)$：例如$M=\{\{a,a,b\}\}$，则$M(a)=2$，是多重集内的该元素的个数

$set(M)$：即把multiset的重复元素去除，得到的set

$NID,EID,L$：这是三个（无限）不交集，NID是点的标识符（indentifiers），EID是边的，L则是（边上的）labels

$G=(N,E,\eta,\lambda)$：这个四元组代表了一个图数据库，N是NID的一个有限子集，E是EID的一个有限子集；$\eta:E\to(N\times N)$是一个全函数（total function），映射到一条边的两个端点，比如边e是$v_1-v_2$，则$\eta(e)=<v_1,v_2>$；$\lambda$是全函数，映射到一条边上的labels。

$N_G,E_G,\eta_G,\lambda_G$：即代表了$G$的$N,E,\eta,\lambda$

$(N,E,\eta)$：代表了一个没有labels的图数据库。

$\rho$：通常代表一条路径。路径是点、边交叉的序列，$\rho=v_0e_1v_1e_2v_2\cdots e_nv_n$

$path(\rho)$：只是一种强调，我们在讨论path。例如$path(a1,t1,a3,t2,a2)$，是一个路径。

$Paths(G)$：代表G上的路径集合。

$\lambda(\rho)$：如果$\rho$是$G$上的路径，$\lambda$是$G$上的labels的函数，那么$\lambda(\rho) = \lambda(e_1)\cdots\lambda(e_n)$

$src(\rho), tgt(\rho)$：即路径的起点和终点，也就是$v_0,v_n$

S到T的路径：即$\rho$的起点$src(\rho)$在起始点集合$S$中，终点$tgt(\rho)$在目标节点集合$T$中。

$PM$：即路径多重集（path multiset），建立在$G$上

$R=(N,E,\eta,\gamma,S,T)$：$R$是建立在图$G$上的一个PMR，其也是一个图。(1)$(N,E,\eta)$是一个无labels图；(2)$\gamma:(N\cup E)\to(N_G\cup E_G)$，$\gamma$是一个total homomorphism，把$R$中的点和边映射到$G$中对应的点和边，多个$R$中的点可能映射为同一个$G$中的点。如果边$e\in E$连接$R$中的两个点$v_1,v_2$，那么$\gamma(e)\in E_G$连接$R$中的两个点$\gamma(v_1),\gamma(v_2)$；(3) $S,T$是$N$的子集，分别为起始节点集合和目标节点集合。

$N_R,E_R,\eta_R,\gamma_R,S_R,T_R$：类似于前，不再重复

$R_1\sqcup R_2$：代表$G$上两个PMR（它们的边和点互为不交集），$R_1$和$R_2$的并，即把每一个分量都进行不交集的并。

$\gamma(\rho)$：即把$R$上的路径$\rho$映射到$G$上的对应路径$\gamma(\rho)=\gamma(v_0)\gamma(e_1)\gamma(v_1)\cdots\gamma(e_n)\gamma(v_n)$

$SPaths(R)$：为集合$\{\gamma(\rho)|\rho\text{ is a path from S to T in R}\}$

$MPaths(R)$：为多重集$\{\{\gamma(\rho)|\rho\text{ is a path from S to T in R}\}\}$。显然的$set(MPaths(R))=SPaths(R)$，可知如果一个PMR表示了一个路径多重集，那么它也可以表示对应的路径集合。

$trim$：如果PMR是trim的，那么对于每个在$N_R$中的点，它们总是在一些路径上，这些路径的起点在S上，终点在T上。

# 之前工作的缺陷

例如GQL和SQL/PGQ这样的语言，在多引擎的数据库中（例如Oracle，postgresql），把查询数据（符合正则表达式的path）用关系表的形式列出来。为了避免在环上查询（导致无穷长度的path），它们使用evaluation modes去组织产生环，让路径保持TRAIL（无重复边），SIMPLE（无重复点），和SHORTEST。

但是面对Figure2这样的图，其关系表的大小是$2^n$级别的，它们没有很好的解决办法。

例如Neo4j这样的数据库，它使用graph projection直观地把查询到的图直接用图像的方式打印出来，在Figure2这种情况下，只需要3n+1个点即可。但是，它的缺陷是，它仍然是先查询出关系表，再由关系表中的信息绘图。另外，graph projection也不是lossless的，它只是input的subgraph，并且，虽然返回了与查询相关的edges和nodes的图，但是并没有返回真正的path。

# 本文的目标

介绍一种更好的方法，去表示无穷的路径，或者指数级大小的路径。并且介绍这种方式可以用在展示大图查询的中间结果。

PMRs aim to combine the best of the relational table representation and graph projections while avoiding their disadvantages. 

That is, they provide a **compact and lossless** representation to an exponential (or even infinite) number of results, similarly as a graph projection, while at the same time allowing to **identify individual paths** in the output, as the tabular representation does

path是第一公民
